import { TypeList } from "docs-ui"

# insertActionBefore

## Parameters

<TypeList types={[{"name":"existingAction","type":"`string`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"action","type":"`string`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"handler","type":"[StepHandler](../../../types/workflows.StepHandler/page.mdx)","description":"","optional":false,"defaultValue":"","expandable":false,"children":[{"name":"invoke","type":"[WorkflowStepHandler](../../../types/workflows.WorkflowStepHandler/page.mdx)","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"compensate","type":"[WorkflowStepHandler](../../../types/workflows.WorkflowStepHandler/page.mdx)","description":"","optional":true,"defaultValue":"","expandable":false,"children":[]}]},{"name":"options","type":"Partial&#60;[TransactionStepsDefinition](../../../types/workflows.TransactionStepsDefinition/page.mdx)&#62;","description":"","optional":true,"defaultValue":"","expandable":false,"children":[{"name":"uuid","type":"`string`","description":"A unique identifier for the transaction step.\nThis is set automatically when declaring a workflow with \"createWorkflow\"","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"action","type":"`string`","description":"Specifies the action to be performed in this step.\n\"name\" is an alias for action when creating a workflow with \"createWorkflow\".","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"continueOnPermanentFailure","type":"`boolean`","description":"Indicates whether the workflow should continue even if there is a permanent failure in this step.\nIn case it is set to true, the the current step will be marked as TransactionStepState.PERMANENT\\_FAILURE and the next steps will be executed.","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"skipOnPermanentFailure","type":"`boolean` \\| `string`","description":"Indicates whether the workflow should skip all subsequent steps in case of a permanent failure in this step.\nIn case it is set to true, the next steps of the workflow will not be executed and their status will be marked as TransactionStepState.SKIPPED\\_FAILURE.\nIn case it is a string, the next steps until the step name provided will be skipped and the workflow will be resumed from the step provided.","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"noCompensation","type":"`boolean`","description":"If true, no compensation action will be triggered for this step in case of a failure.","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"maxRetries","type":"`number`","description":"The maximum number of times this step should be retried in case of temporary failures.\nThe default is 0 (no retries).","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"retryInterval","type":"`number`","description":"The interval (in seconds) between retry attempts after a temporary failure.\nThe default is to retry immediately.","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"retryIntervalAwaiting","type":"`number`","description":"The interval (in seconds) to retry a step even if its status is \"TransactionStepStatus.WAITING\".","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"timeout","type":"`number`","description":"The maximum amount of time (in seconds) to wait for this step to complete.\nThis is NOT an execution timeout, the step will always be executed and wait for its response.\nIf the response is not received within the timeout set, it will be marked as \"TransactionStepStatus.TIMEOUT\" and the workflow will be reverted as soon as it receives the response.","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"async","type":"`boolean`","description":"If true, the step is executed asynchronously. This means that the workflow will not wait for the response of this step.\nAsync steps require to have their responses set using \"setStepSuccess\" or \"setStepFailure\", unless it is combined with \"backgroundExecution: true\".\nIf combined with a timeout, and any response is not set within that interval, the step will be marked as \"TransactionStepStatus.TIMEOUT\" and the workflow will be reverted immediately.","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"nested","type":"`boolean`","description":"It flags where the step contains a sub transaction inside itself.","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"backgroundExecution","type":"`boolean`","description":"It applies to \"async\" steps only, allowing them to run in the background and automatically complete without external intervention.\nIt is ideal for time-consuming tasks that will be complete after the execution, contrasting with standard \"async\" operations that require a response to be set in a later stage.","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"compensateAsync","type":"`boolean`","description":"If true, the compensation function for this step is executed asynchronously. Which means, the response has to be set using \"setStepSuccess\" or \"setStepFailure\".","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"noWait","type":"`boolean`","description":"If true, the workflow will not wait for their sibling steps to complete before moving to the next step.","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"saveResponse","type":"`boolean`","description":"If true, the response of this step will be stored.\nDefault is true.","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"next","type":"[TransactionStepsDefinition](../../../types/workflows.TransactionStepsDefinition/page.mdx) \\| [TransactionStepsDefinition](../../../types/workflows.TransactionStepsDefinition/page.mdx)[]","description":"Defines the next step(s) to execute after this step. Can be a single step or an array of steps.","optional":true,"defaultValue":"","expandable":false,"children":[]}]}]} expandUrl="https://docs.medusajs.com/learn/fundamentals/data-models/manage-relationships#retrieve-records-of-relation" sectionTitle="insertActionBefore"/>

## Returns

<TypeList types={[{"name":"steps","type":"[InternalStep](../../../interfaces/workflows.InternalStep/page.mdx)","description":"Defines the structure and behavior of a single step within a transaction workflow.","optional":false,"defaultValue":"","expandable":false,"children":[{"name":"depth","type":"`number`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"next","type":"[InternalStep](../../../interfaces/workflows.InternalStep/page.mdx) \\| [InternalStep](../../../interfaces/workflows.InternalStep/page.mdx)[]","description":"Defines the next step(s) to execute after this step. Can be a single step or an array of steps.","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"parent","type":"`null` \\| [InternalStep](../../../interfaces/workflows.InternalStep/page.mdx)","description":"","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"uuid","type":"`string`","description":"A unique identifier for the transaction step.\nThis is set automatically when declaring a workflow with \"createWorkflow\"","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"action","type":"`string`","description":"Specifies the action to be performed in this step.\n\"name\" is an alias for action when creating a workflow with \"createWorkflow\".","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"continueOnPermanentFailure","type":"`boolean`","description":"Indicates whether the workflow should continue even if there is a permanent failure in this step.\nIn case it is set to true, the the current step will be marked as TransactionStepState.PERMANENT\\_FAILURE and the next steps will be executed.","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"skipOnPermanentFailure","type":"`string` \\| `boolean`","description":"Indicates whether the workflow should skip all subsequent steps in case of a permanent failure in this step.\nIn case it is set to true, the next steps of the workflow will not be executed and their status will be marked as TransactionStepState.SKIPPED\\_FAILURE.\nIn case it is a string, the next steps until the step name provided will be skipped and the workflow will be resumed from the step provided.","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"noCompensation","type":"`boolean`","description":"If true, no compensation action will be triggered for this step in case of a failure.","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"maxRetries","type":"`number`","description":"The maximum number of times this step should be retried in case of temporary failures.\nThe default is 0 (no retries).","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"retryInterval","type":"`number`","description":"The interval (in seconds) between retry attempts after a temporary failure.\nThe default is to retry immediately.","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"retryIntervalAwaiting","type":"`number`","description":"The interval (in seconds) to retry a step even if its status is \"TransactionStepStatus.WAITING\".","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"timeout","type":"`number`","description":"The maximum amount of time (in seconds) to wait for this step to complete.\nThis is NOT an execution timeout, the step will always be executed and wait for its response.\nIf the response is not received within the timeout set, it will be marked as \"TransactionStepStatus.TIMEOUT\" and the workflow will be reverted as soon as it receives the response.","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"async","type":"`boolean`","description":"If true, the step is executed asynchronously. This means that the workflow will not wait for the response of this step.\nAsync steps require to have their responses set using \"setStepSuccess\" or \"setStepFailure\", unless it is combined with \"backgroundExecution: true\".\nIf combined with a timeout, and any response is not set within that interval, the step will be marked as \"TransactionStepStatus.TIMEOUT\" and the workflow will be reverted immediately.","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"nested","type":"`boolean`","description":"It flags where the step contains a sub transaction inside itself.","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"backgroundExecution","type":"`boolean`","description":"It applies to \"async\" steps only, allowing them to run in the background and automatically complete without external intervention.\nIt is ideal for time-consuming tasks that will be complete after the execution, contrasting with standard \"async\" operations that require a response to be set in a later stage.","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"compensateAsync","type":"`boolean`","description":"If true, the compensation function for this step is executed asynchronously. Which means, the response has to be set using \"setStepSuccess\" or \"setStepFailure\".","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"noWait","type":"`boolean`","description":"If true, the workflow will not wait for their sibling steps to complete before moving to the next step.","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"saveResponse","type":"`boolean`","description":"If true, the response of this step will be stored.\nDefault is true.","optional":true,"defaultValue":"","expandable":false,"children":[]}]},{"name":"hasChanges_","type":"`boolean`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"hasChanges","type":"`object`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"constructor","type":"(`steps?`: [TransactionStepsDefinition](../../../types/workflows.TransactionStepsDefinition/page.mdx)) => [OrchestratorBuilder](../../../classes/workflows.OrchestratorBuilder/page.mdx)","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"load","type":"(`steps?`: [TransactionStepsDefinition](../../../types/workflows.TransactionStepsDefinition/page.mdx)) => `this`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"addAction","type":"(`action`: `string`, `options?`: Partial&#60;[TransactionStepsDefinition](../../../types/workflows.TransactionStepsDefinition/page.mdx)&#62;) => `this`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"replaceAction","type":"(`existingAction`: `string`, `action`: `string`, `options?`: Partial&#60;[TransactionStepsDefinition](../../../types/workflows.TransactionStepsDefinition/page.mdx)&#62;) => `this`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"insertActionBefore","type":"(`existingAction`: `string`, `action`: `string`, `options?`: Partial&#60;[TransactionStepsDefinition](../../../types/workflows.TransactionStepsDefinition/page.mdx)&#62;) => `this`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"insertActionAfter","type":"(`existingAction`: `string`, `action`: `string`, `options?`: Partial&#60;[TransactionStepsDefinition](../../../types/workflows.TransactionStepsDefinition/page.mdx)&#62;) => `this`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"appendTo","type":"(`step`: `string` \\| [InternalStep](../../../interfaces/workflows.InternalStep/page.mdx), `newStep`: [InternalStep](../../../interfaces/workflows.InternalStep/page.mdx)) => `this`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"appendAction","type":"(`action`: `string`, `to`: `string`, `options?`: Partial&#60;[TransactionStepsDefinition](../../../types/workflows.TransactionStepsDefinition/page.mdx)&#62;) => `this`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"move","type":"(`actionToMove`: `string`, `targetAction`: `string`, `__namedParameters?`: ``{ runInParallel?: boolean ; mergeNext?: boolean  }``) => [OrchestratorBuilder](../../../classes/workflows.OrchestratorBuilder/page.mdx)","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"moveAction","type":"(`actionToMove`: `string`, `targetAction`: `string`) => [OrchestratorBuilder](../../../classes/workflows.OrchestratorBuilder/page.mdx)","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"moveAndMergeNextAction","type":"(`actionToMove`: `string`, `targetAction`: `string`) => [OrchestratorBuilder](../../../classes/workflows.OrchestratorBuilder/page.mdx)","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"mergeActions","type":"(`where`: `string`, ...`actions`: `string`[]) => `this`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"deleteAction","type":"(`action`: `string`, `steps?`: [InternalStep](../../../interfaces/workflows.InternalStep/page.mdx)) => `this`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"pruneAction","type":"(`action`: `string`) => `this`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"findStepByAction","type":"(`action`: `string`, `step?`: [InternalStep](../../../interfaces/workflows.InternalStep/page.mdx)) => `undefined` \\| [InternalStep](../../../interfaces/workflows.InternalStep/page.mdx)","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"findOrThrowStepByAction","type":"(`action`: `string`, `steps?`: [InternalStep](../../../interfaces/workflows.InternalStep/page.mdx)) => [InternalStep](../../../interfaces/workflows.InternalStep/page.mdx)","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"findParentStepByAction","type":"(`action`: `string`, `step?`: [InternalStep](../../../interfaces/workflows.InternalStep/page.mdx)) => `undefined` \\| [InternalStep](../../../interfaces/workflows.InternalStep/page.mdx)","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"findLastStep","type":"(`steps?`: [InternalStep](../../../interfaces/workflows.InternalStep/page.mdx)) => [InternalStep](../../../interfaces/workflows.InternalStep/page.mdx)","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"updateDepths","type":"(`startingStep`: [InternalStep](../../../interfaces/workflows.InternalStep/page.mdx), `parent`: `any`, `incr?`: `number`, `beginFrom?`: `number`) => `void`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"build","type":"() => [TransactionStepsDefinition](../../../types/workflows.TransactionStepsDefinition/page.mdx)","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]}]} expandUrl="https://docs.medusajs.com/learn/fundamentals/data-models/manage-relationships#retrieve-records-of-relation" sectionTitle="insertActionBefore"/>
